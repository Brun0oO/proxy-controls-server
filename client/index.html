<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Proxy Controls • Client</title>
  <meta name="description" content="Proxy user input from host machine to VR devices, such as Google Cardboard.">
  <meta name="author" content="Don McCurdy">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Font
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="assets/normalize.css">
  <link rel="stylesheet" href="assets/skeleton.css">
  <link rel="stylesheet" href="assets/client.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="assets/favicon.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container" ng-app="proxyControlsApp" ng-controller="MainCtrl">

    <!-- Introduction
    ––––––––––––––––––––– -->
    <h1 style="margin-top: 5rem">Proxy Controls • Client</h1>
    <div class="row">
      <p>With this tab in focus, keyboard and gamepad events can be sent to a remote client.</p>
    </div>

    <h3 ng-if="!server.connected">Get Started</h3>
    <div ng-if="!server.connected" class="row">
      <div class="eight columns">
        <input type="text"
               placeholder="pair-code"
               class="u-full-width"
               ng-model="pairCode"
               ng-pattern="/^[a-zA-Z]+\-[a-zA-Z]+$/"
               ng-keyup="$event.keyCode == 13 && connect(pairCode)">
      </div>
      <div class="four columns">
        <button class="button button-primary u-full-width"
                ng-click="connect(pairCode)">Connect</button>
      </div>
    </div>

    <!-- Status
    ––––––––––––––––––––– -->
    <div class="row">
      <h3>Connection</h3>
      <div class="module">
        <ul>
          <li>
            Server Status:
            <span class="toggle" ng-class="{green: server.connected, red: !server.connected}">
              {{ server.connected ? 'Connected' : 'Disconnected' }}
            </span>
          </li>
          <li>
            Remote Device:
            <span class="toggle" ng-class="{green: peer.connected, red: !peer.connected}">
              {{ peer.connected ? 'Connected' : 'Disconnected' }}
            </span>
          </li>
          <li>
            Protocol:
            <span class="toggle" ng-class="{green: peer.protocol === 'rtc',
                                            yellow: peer.protocol === 'socket',
                                            red: !peer.protocol}">
              {{ peer.protocol ? protocolLabels[peer.protocol] : 'Disconnected' }}
            </span>
          </li>
          <li>Latency: {{ peer.latency || '∞' }}ms</li>
        </ul>
      </div>
    </div>

    <!-- Listeners
    ––––––––––––––––––––– -->
    <div class="row" ng-if="listeners.length">
      <h3>Input Devices</h3>
      <div class="module" ng-repeat="listener in listeners">
        <button class="button u-pull-right"
                ng-class="{ 'button-primary': !listener.isEnabled() }"
                ng-click="listener.setEnabled(!listener.isEnabled())">
          {{ listener.isEnabled() ? 'Disable' : 'Enable' }}
        </button>
        <h5>{{ listener.title }}</h5>
        <ul>
          <li>A-Frame component: <a href="{{ listener.github }}" target="_blank">{{ listener.component }}</a></li>
          <li>Event type: <code>{{ listener.type }}</code></li>
        </ul>
      </div>
    </div>

  </div>

  <!-- Bootstrap
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="bundle.js"></script>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>

